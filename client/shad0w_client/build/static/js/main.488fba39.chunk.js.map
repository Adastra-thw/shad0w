{"version":3,"sources":["App.js","logo.png","GoldenLayout/goldenLayoutComponent.js","GoldenLayout/AgentsPanel.js","GoldenLayout/AgentsMenuPanel.js","background.jpg","GoldenLayout/goldenLayout-dependencies.js","globals.js","serviceWorker.js","index.js"],"names":["getCookie","name","localStorage","getItem","App","props","_this","Object","_home_kali_Desktop_shad0w_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_home_kali_Desktop_shad0w_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_home_kali_Desktop_shad0w_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","timer","undefined","state","isLoaded","nickValue","hostValue","tokenValue","commState","e","setState","target","value","setItem","_this2","setCookie","_this$state","newLogin","nick","token","tmp","JSON","stringify","assign","parse","fetch","method","headers","Accept","Content-Type","body","username","password","credentials","then","response","json","console","log","document","cookie","alert","now","Date","expireTime","getTime","setTime","toUTCString","window","location","reload","catch","err","removeItem","eraseCookie","event","connOption","strUser","current","tagName","deviceIsMobile","test","navigator","userAgent","substr","menuVisible","restartTimer","clearTimeout","setTimeout","toggleSidebar","bind","connections","FA","require","keys","map","key","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","Math","random","className","style","backgroundImage","background","id","color","fontSize","packageJson","version","src","logo","width","alt","defaultValue","onChange","change","disabled","handleChangeHost","type","placeholder","handleChangeNick","handleChangeToken","onClick","setAllCookies","clearAllConnections","clearConnection","showSidebar","onMouseEnter","stopTimer","onMouseLeave","eraseAllCookies","position","tlte","title","_GoldenLayout_goldenLayoutComponent__WEBPACK_IMPORTED_MODULE_6__","config","settings","selectionEnabled","content","component","isClosable","activeItemIndex","registerComponents","myLayout","registerComponent","AgentsPanel","AgentsMenuPanel","React","Component","module","exports","__webpack_require__","p","GoldenLayoutComponent","_React$Component","_getPrototypeOf2","_len","arguments","length","args","Array","_key","apply","concat","containerRef","createRef","goldenLayoutInstance","_home_kali_Desktop_shad0w_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__","_home_kali_Desktop_shad0w_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__","panels","from","renderPanels","ref","htmlAttrs","panel","index","ReactDOM","createPortal","_getReactComponent","_container","getElement","reactComponentHandler","newRenderPanels","Set","add","delete","GoldenLayout","$","global","myMainLayout","Function","reactContainer","init","addEventListener","updateSize","height","ReactComponentHandlerPatched","layoutManager","componentRender","off","_render","_destroy","defaultProps","glEventHub","eventHub","glContainer","extend","_config","_reactClass","utils","ReactComponentHandler","focused","agents","dragSources","activeIndex","allIndexes","_this3","i","item","includes","agentInfo","agent","uuid","myClick","selectRow","newItemConfig","agentuuid","selectedItem","root","contentItems","addChild","react_contextmenu__WEBPACK_IMPORTED_MODULE_6__","renderTag","attributes","onContextMenu","selectRowRight","onDoubleClick","each","agentUUID","find","eq","text","createDragSource","push","forEach","indexOf","splice","agentsMenus","active","tabIndex","onKeyDown","selectMany","node","getElementById","focus","_this$state2","keyCode","vals","highest","max","lowest","min","parseInt","contains","Cookie","_this4","getBeacons","handleClick","setInterval","x","_this5","removeEventListener","handleSelect","bfile","that","_home_kali_Desktop_shad0w_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","files","reader","FileReader","onload","result","base64String","Uint8Array","Buffer","toString","displayDrop","trim","lastIndex","lastIndexOf","str","substring","print_result_newline","sendAgentData","readAsArrayBuffer","handleDrop","time","scrollToBottom","messagesEnd","scrollIntoView","behavior","results","history","historyval","historylatest","latest_result","scroll","messageInput","bg","activeAgent","getCommState","active_agents","react__WEBPACK_IMPORTED_MODULE_6___default","onBgClick","onBgClickDouble","react_file_drop__WEBPACK_IMPORTED_MODULE_7__","onDrop","zIndex","display","whiteSpace","getStub","maxLength","handleChange","keyPress","buffer","bytes","len","byteLength","array","String","fromCharCode","btoa","join","dt","ceil","stale","seconds","floor","round","trueSleep","bottomScroll","_this$state3","checkLatest","split","results_latest","dedup","isInViewport","preventDefault","button","_this$state4","HAXLOL","_this$state5","helpMenu","win32commands","win64commands","linuxcommands","darwincommands","helpArr","helpCommand","help","ordered","sort","inject","_this$state6","slice","setSelectionRange","offset","top","getBoundingClientRect","innerHeight","_this6","print_result","forceUpdate","agentResults","jquery__WEBPACK_IMPORTED_MODULE_0__","jquery__WEBPACK_IMPORTED_MODULE_0___default","n","jQuery","jquery","Boolean","hostname","match","render","react_default","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.488fba39.chunk.js","sourcesContent":["import React from \"react\";\nimport { GoldenLayoutComponent } from \"./GoldenLayout/goldenLayoutComponent\";\nimport { AgentsPanel } from \"./GoldenLayout/AgentsPanel\";\nimport { AgentsMenuPanel } from \"./GoldenLayout/AgentsMenuPanel\";\nimport 'react-confirm-alert/src/react-confirm-alert.css'\nimport 'golden-layout/src/css/goldenlayout-base.css';\nimport 'golden-layout/src/css/goldenlayout-dark-theme.css';\nimport 'bootstrap-css-only/css/bootstrap.min.css';\nimport './App.css';\nimport logo from \"./logo.png\";\nimport background from \"./background.jpg\";\nimport packageJson from \"../package.json\";\n\nexport function getCookie(name) {\n  var cookie = localStorage.getItem(name);\n  return cookie;\n}\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoaded: false, nickValue: 'admin', hostValue: 'http://127.0.0.1:1337', tokenValue: 'shad0w', commState: {}\n    };\n  }\n\n  handleChangeNick(e) {\n    this.setState({ nickValue: e.target.value });\n  }\n  handleChangeHost(e) {\n    this.setState({ hostValue: e.target.value });\n  }\n  handleChangeToken(e) {\n    this.setState({ tokenValue: e.target.value });\n  }\n\n  setCookie(name,value) {\n    localStorage.setItem(name, value);\n  }\n\n  setAllCookies() {\n    this.setCookie(\"Host\", this.state.hostValue);\n    this.setCookie(\"LastHost\", this.state.hostValue);\n    this.setCookie(\"Nick\", this.state.nickValue);\n    this.setCookie(\"LastNick\", this.state.nickValue);\n    this.setCookie(\"Token\", this.state.tokenValue);\n    this.setCookie(\"LastToken\", this.state.tokenValue);\n\n    let {hostValue, tokenValue, nickValue} = this.state;\n    const newLogin = {};\n    newLogin[hostValue] = {\"nick\":nickValue,\"token\":tokenValue};\n    if ( localStorage.getItem(\"savedConnections\") ) {\n      const tmp = localStorage.getItem(\"savedConnections\");\n      this.setCookie(\"savedConnections\", JSON.stringify(Object.assign({}, JSON.parse(tmp), newLogin)));\n    }\n    else {\n      this.setCookie(\"savedConnections\", JSON.stringify(newLogin));\n    }\n    fetch(getCookie(\"Host\")+\"/login\", {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\"username\": getCookie(\"Nick\"), \"password\": getCookie(\"Token\")}),\n      credentials: 'include'\n    })\n      .then((response) => response.json())\n      .then((json) => {\n        console.log(document.cookie);\n        if (json[\"success\"] === false) {\n          alert(\"BAD CREDENTIALS.  Try again!\")\n        } else {\n          console.log('OK');\n          var now = new Date();\n          var time = now.getTime();\n          var expireTime = time + 1000*36000;\n          now.setTime(expireTime);\n          document.cookie = json[\"tokenName\"]+'='+json+';expires='+now.toUTCString()+';path=/';\n          this.setCookie(\"tokenName\", json[\"tokenName\"]);\n          this.setCookie(\"tokenValue\", json[\"tokenValue\"])\n          window.location.reload();\n        }\n      }).catch((err) => {\n        alert(\"Connection failed.\");\n        console.log(err);\n    });\n  }\n\n  eraseCookie(name) {   \n    localStorage.removeItem(name);\n  }\n\n  eraseAllCookies() {\n    this.eraseCookie(\"Nick\");\n    this.eraseCookie(\"Host\");\n    this.eraseCookie(\"Token\");\n    this.eraseCookie(\"tokenName\");\n    this.eraseCookie(\"tokenValue\");\n    document.cookie = \"SDWAuth= ; expires = Thu, 01 Jan 1970 00:00:00 GMT\"\n    window.location.reload();\n  }\n\n  //SDWAuth\n  UNSAFE_componentWillMount() {\n    if (getCookie(\"LastHost\")) {\n      this.setState({ hostValue: getCookie(\"LastHost\")});\n    }\n    if (getCookie(\"LastNick\")) {\n      this.setState({ nickValue: getCookie(\"LastNick\")});\n    }\n    if (getCookie(\"LastToken\")) {\n      this.setState({ tokenValue: getCookie(\"LastToken\")});\n    }\n    if (getCookie(\"tokenName\") && getCookie(\"tokenValue\")) {\n      this.setState({isLoaded: true});\n    }\n  }\n\n  change(event) {\n    this.setState({hostValue: event.target.value});\n    this.setState({nickValue: JSON.parse(localStorage.getItem(\"savedConnections\"))[event.target.value][\"nick\"]});\n    this.setState({tokenValue: JSON.parse(localStorage.getItem(\"savedConnections\"))[event.target.value][\"token\"]});\n    this.setState({connOption: event.target.value});\n  }\n\n  clearAllConnections() {\n    this.eraseCookie(\"savedConnections\");\n    this.eraseCookie(\"LastHost\");\n    this.eraseCookie(\"LastNick\");\n    this.eraseCookie(\"LastToken\");\n  }\n\n  clearConnection() {\n    const strUser = this.state.connOption;\n    const current = JSON.parse(getCookie(\"savedConnections\"));\n    delete current[strUser];\n    this.setCookie(\"savedConnections\", JSON.stringify(current));\n  }\n\n  showSidebar(e) {\n    if (e.target.tagName === \"LI\" || e.target.tagName === \"UL\" || e.target.tagName === \"SPAN\") {\n      return false;\n    }\n    \n    let deviceIsMobile = false; //At the beginning we set this flag as false. If we can detect the device is a mobile device in the next line, then we set it as true.\n    if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) //eslint-disable-line\n        || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(navigator.userAgent.substr(0,4))) { //eslint-disable-line\n      deviceIsMobile = true;\n    }\n\n    let {menuVisible} = this.state;\n    menuVisible = !menuVisible;\n    if (menuVisible && !deviceIsMobile) {\n      this.restartTimer();\n    }\n    else if (!deviceIsMobile) {\n      if (this.timer) {\n        clearTimeout(this.timer);\n        this.timer = undefined;\n      }\n    }\n    this.setState({ menuVisible });\n    return;\n  }\n\n  toggleSidebar() {\n    this.timer = undefined;\n    this.setState({ menuVisible: !this.state.menuVisible });\n    return;\n  }\n\n  timer = undefined;\n  restartTimer() {\n    let deviceIsMobile = false; //At the beginning we set this flag as false. If we can detect the device is a mobile device in the next line, then we set it as true.\n    if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) //eslint-disable-line\n        || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(navigator.userAgent.substr(0,4))) { //eslint-disable-line\n      deviceIsMobile = true;\n    }\n    if (deviceIsMobile) {\n      return false;\n    }\n\n    if (this.timer) {\n      clearTimeout(this.timer);\n    }\n    this.timer = setTimeout(this.toggleSidebar.bind(this), 1000);\n  }\n\n  stopTimer() {\n    if (this.timer) {\n      clearTimeout(this.timer);\n      this.timer = undefined;\n    }\n  }\n\n  render() {\n    const FA = require('react-fontawesome')\n    const { menuVisible } = this.state;\n\n    const saved = localStorage.getItem(\"savedConnections\");\n    let connections;\n    if (saved) {\n      connections = Object.keys(JSON.parse(localStorage.getItem(\"savedConnections\"))).map(function(key) {\n      return <option key={Math.random()} value={key}>{key}</option>;\n      });\n    }\n\n    if (getCookie('Host') === null || getCookie('Nick') === null || getCookie('Token') === null || getCookie('tokenName') === null || getCookie('tokenValue') === null) {\n      return ( \n        <div className=\"wrapper fadeInDown fill-cont\" style={{backgroundImage : 'url(' + background + ')'}}>\n          <div id=\"formContent\" className=\"fadeIn first\">\n            <form>\n              <br />\n              <h1 style={{color:\"white\"}}>shad0w<br/><span style={{fontSize:\"20px\"}}>v{packageJson.version}</span></h1>\n              <img src={logo} style={{width:\"25%\"}} alt=\"shad0w\" />\n              <br /><br />\n              <p style={{color:\"white\"}}><strong>Enter a host, nickname and token to login.</strong></p>\n              <span className=\"custom-dropdown\">\n               <select defaultValue=\"\" value={this.state.connOption} id=\"connection\" onChange={this.change.bind(this)}>\n                <option disabled value=\"\">Saved Connections</option>\n                  { connections }\n                </select>\n              </span><br />\n              <input onChange={function(e){this.handleChangeHost(e)}.bind(this)} value={this.state.hostValue} type=\"text\" id=\"Host\" className=\"fadeIn third\" name=\"Host\" placeholder=\"Host\"/>\n              <input onChange={function(e){this.handleChangeNick(e)}.bind(this)} value={this.state.nickValue} type=\"text\" id=\"Nick\" className=\"fadeIn second\" name=\"Nick\" placeholder=\"Nick\"/>\n              <input onChange={function(e){this.handleChangeToken(e)}.bind(this)} value={this.state.tokenValue} type=\"text\" id=\"Token\" className=\"fadeIn third\" name=\"Token\" placeholder=\"Token\"/>\n              <br /><br /><button type=\"button\" className=\"fadeIn fourth btn btn-light\" onClick={function(){this.setAllCookies()}.bind(this)}>ENTER</button> <button className=\"fadeIn fourth btn btn-light\" onClick={function(){this.clearAllConnections()}.bind(this)}>CLEAR ALL</button><br /><br />\n              <button className=\"fadeIn fourth btn btn-light\" onClick={function(){this.clearConnection()}.bind(this)}>DELETE SELECTED CONNECTION</button><br /><br />\n            </form>\n          </div>\n        </div>\n      );\n    }\n \n    if (!this.state.isLoaded) {\n      return <div>Loading...</div>;\n    }\n\n    return (\n      <div onClick={(menuVisible) ? this.showSidebar.bind(this):() => { return false }}>\n        <div id=\"wrapper\">\n          <ul id=\"menuContainer\" onMouseEnter={this.stopTimer.bind(this)} onMouseLeave={this.restartTimer.bind(this)} className={\"scrollable \"+( menuVisible ? 'visible' : '' )}>\n            <li><img src={logo} style={{width:\"30%\"}} alt=\"jian yang\" /><span style={{fontSize:\"20px\"}}>&nbsp;<strong>shad0w</strong></span></li>\n            <li onClick={function(){this.eraseAllCookies()}.bind(this)}>Logout</li>\n            <li onClick={function(){window.location.reload()}}>Reload</li>\n          </ul>\n          <div className=\"drawerScroll\">\n            <img style={{ position:\"relative\", width:\"25px\"}} src={logo} alt=\"jian yang\" /><div className=\"pad\" />\n            <div tlte=\"expand\" onClick={this.showSidebar.bind(this)} className={\"drawerBtn \"+( menuVisible ? 'visibleBtn' : '' )}><FA name=\"ellipsis-h\" /></div><div className=\"pad\" />\n            <div title=\"logout\" onClick={function(){this.eraseAllCookies()}.bind(this)} className={\"drawerBtn \"+( menuVisible ? 'visibleBtn' : '' )}><FA name=\"sign-out-alt\" /></div><div className=\"pad\" />\n            <div title=\"refresh\" onClick={function(){window.location.reload()}} className={\"drawerBtn \"+( menuVisible ? 'visibleBtn' : '' )}><FA name=\"sync\" /></div><div className=\"pad\" />\n          </div>\n          <div id=\"layoutContainer\"></div>\n        </div>\n        <GoldenLayoutComponent //config from simple react example: https://golden-layout.com/examples/#qZXEyv\n            config={{\n              settings: {\n                selectionEnabled: true\n              },\n              content: [{\n                type: \"column\",\n                content:[{\n                  type:\"react-component\",\n                  title: \"Agents\",\n                  component: \"agents-component\",\n                  isClosable: false,\n                  activeItemIndex: 1,\n                  props: {  }\n                }]\n              }]\n            }}\n            registerComponents={myLayout => {\n              myLayout.registerComponent(\"agents-component\", AgentsPanel);\n              myLayout.registerComponent(\"agents-menu-component\", AgentsMenuPanel);\n            }}\n        />\n      </div>\n    );\n  }\n\n}","module.exports = __webpack_public_path__ + \"static/media/logo.b03442fa.png\";","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./goldenLayout-dependencies\";\nimport GoldenLayout from \"golden-layout\";\nimport $ from \"jquery\";\n\nexport class GoldenLayoutComponent extends React.Component {\n  state = {};\n  containerRef = React.createRef();\n\n  render() {\n    let panels = Array.from(this.state.renderPanels || []);\n    return (\n      <div ref={this.containerRef} {...this.props.htmlAttrs}>\n        {panels.map((panel, index) => {\n          return ReactDOM.createPortal(\n            panel._getReactComponent(),\n            panel._container.getElement()[0]\n          );\n        })}\n      </div>\n    );\n  }\n\n  componentRender(reactComponentHandler) {\n    this.setState(state => {\n      let newRenderPanels = new Set(state.renderPanels);\n      newRenderPanels.add(reactComponentHandler);\n      return { renderPanels: newRenderPanels };\n    });\n  }\n  componentDestroy(reactComponentHandler) {\n    this.setState(state => {\n      let newRenderPanels = new Set(state.renderPanels);\n      newRenderPanels.delete(reactComponentHandler);\n      return { renderPanels: newRenderPanels };\n    });\n  }\n\n  goldenLayoutInstance = undefined;\n\n  componentDidMount() {\n    this.goldenLayoutInstance = new GoldenLayout(\n      this.props.config || {},\n      $('#layoutContainer')\n    );\n    //The below globalizes the layout for additional use.\n    global.myMainLayout = this.goldenLayoutInstance;\n    if (this.props.registerComponents instanceof Function)\n      this.props.registerComponents(this.goldenLayoutInstance);\n    this.goldenLayoutInstance.reactContainer = this;\n    this.goldenLayoutInstance.init();\n\n    var deviceIsMobile = false; //At the beginning we set this flag as false. If we can detect the device is a mobile device in the next line, then we set it as true.\n    if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) //eslint-disable-line\n        || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(navigator.userAgent.substr(0,4))) { //eslint-disable-line\n      deviceIsMobile = true;\n    }\n\n    var myLayout = this.goldenLayoutInstance;\n    window.addEventListener('resize', function(event){ \n      //myLayout.updateSize($(window).width(), $(window).height());\n      myLayout.updateSize('100%', $(window).height());\n    });\n    var addMenuItem = function( title, text, component ) {\n      var element = $( '<li>' + text + '</li>' );\n      $( '#menuContainer' ).append( element );\n  \n      var newItemConfig = {\n          title: title,\n          type: 'react-component',\n          component: component,\n          props: { },\n      };\n    \n      if(!deviceIsMobile){\n        myLayout.createDragSource( element, newItemConfig );\n      }\n\n      element.click(function(){\n        if( myLayout.selectedItem === null ) {\n            //alert( 'No item selected. Please click the black header bar to select which item you want to add new items to or drag to create a new window.' );\n            myLayout.root.contentItems[ 0 ].addChild( newItemConfig );\n        } else {\n            myLayout.selectedItem.addChild( newItemConfig );\n        }\n      });\n    };\n    /*addMenuItem( 'Agents Graph', 'Agents Graph', 'agents-graph-component');\n    addMenuItem( 'HTTP Listener', 'HTTP Listener', 'http-listener-component');\n    addMenuItem( 'SMB Listener', 'SMB Listener', 'smb-listener-component');\n    if(!deviceIsMobile){\n      myLayout.createDragSource( $('#helpmenu'), {title:'Agent Help',type:'react-component',component:'help-component'} );\n      myLayout.createDragSource( $('#helpmenuside'), {title:'Agent Help',type:'react-component',component:'help-component'} );\n      myLayout.createDragSource( $('#graphmenu'), {title:'Agents Graph',type:'react-component',component:'agents-graph-component',props: { connPipe: this.props.connPipe, getCommState: this.props.getCommState }} );\n      myLayout.createDragSource( $('#httpmenu'), {title:'HTTP Listener',type:'react-component',component:'http-listener-component',props: { connPipe: this.props.connPipe, getCommState: this.props.getCommState }} );\n      myLayout.createDragSource( $('#smbmenu'), {title:'SMB Listener',type:'react-component',component:'smb-listener-component',props: { connPipe: this.props.connPipe, getCommState: this.props.getCommState }} );\n    }*/\n  }\n}\n\n\n//Patching internal GoldenLayout.__lm.utils.ReactComponentHandler:\n\nconst ReactComponentHandler = GoldenLayout[\"__lm\"].utils.ReactComponentHandler;\n\nclass ReactComponentHandlerPatched extends ReactComponentHandler {\n  _render() {\n    var reactContainer = this._container.layoutManager.reactContainer; //Instance of GoldenLayoutComponent class\n    if (reactContainer && reactContainer.componentRender)\n      reactContainer.componentRender(this);\n  }\n  _destroy() {\n    //ReactDOM.unmountComponentAtNode( this._container.getElement()[ 0 ] );\n    this._container.off(\"open\", this._render, this);\n    this._container.off(\"destroy\", this._destroy, this);\n  }\n\n  _getReactComponent() {\n    //the following method is absolute copy of the original, provided to prevent depenency on window.React\n    var defaultProps = {\n      glEventHub: this._container.layoutManager.eventHub,\n      glContainer: this._container\n    };\n    var props = $.extend(defaultProps, this._container._config.props);\n    return React.createElement(this._reactClass, props);\n  }\n}\n\nGoldenLayout[\"__lm\"].utils.ReactComponentHandler = ReactComponentHandlerPatched;\n","import React from \"react\";\nimport { ContextMenu, MenuItem, ContextMenuTrigger } from \"react-contextmenu\";\nimport $ from \"jquery\";\nimport { getCookie } from \"../App\";\nconst fetch = require('sync-fetch');\n\nexport class AgentsPanel extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { isLoaded: false, focused: false, agents: [], dragSources: [], activeIndex: {}, allIndexes: {} };\n  }\n\n  render() {\n    const { isLoaded, agents, dragSources, allIndexes } = this.state;\n    console.log(this.state.agents);\n    if (!isLoaded) {\n      const FA = require('react-fontawesome');\n      return <div className=\"loading\"><FA name=\"spinner enlargeSpinner\" className=\"rotate\"/><br />LOADING</div>;\n    }\n\n    for (var i = 0; i < localStorage.length; i++) {\n      const item = localStorage.key(i);\n      if (item !== \"savedConnections\" && !item.includes(\"Host\") && !item.includes(\"Nick\") && !item.includes(\"Token\") && !item.includes(\"gl-\") && !item.includes(\"_latest\") && !item.includes(\"token\")) {\n        if (!(item in agents)) {\n          localStorage.removeItem(item);\n          localStorage.removeItem(item+\"_latest\");\n        }\n      };\n    }\n\n    const agentInfo = Object.keys(agents).map(function(key, index) {\n      const agent = agents[key];\n      const uuid = key;\n\n      function myClick() {\n        this.selectRow(index);\n        const newItemConfig = {\n          title: agent[\"ip\"]+\"@\"+agent[\"pid\"]+\":\"+agent[\"procname\"],\n          type: \"react-component\",\n          component: \"agents-menu-component\",\n          props: { agentuuid: uuid },\n        };\n        if( global.myMainLayout.selectedItem === null ) {\n          //alert( 'No item selected. Please click the black header bar to select which item you want to add new items to.' );\n          global.myMainLayout.root.contentItems[ 0 ].addChild( newItemConfig );\n        } else {\n          global.myMainLayout.selectedItem.addChild( newItemConfig );\n        }\n      }\n\n      allIndexes[index] = uuid;\n      return <ContextMenuTrigger key={uuid} id={uuid+\"shad0wMENU\"} renderTag=\"tr\" attributes={{\n        id: uuid+\"shad0w\",\n        className: \"pointer \" + ((index in this.state.activeIndex) && \"active-index\")\n      }}>\n        {/*<tr id={uuid+\"shad0w\"} key={uuid} className=\"pointer\">*/}\n          <td onContextMenu={ e=>this.selectRowRight(index,uuid) } onClick={ e=>this.selectRow(index,uuid) } onDoubleClick={myClick.bind(this)} /*style={{display: \"none\"}}*/>{uuid}</td>\n          <td onContextMenu={ e=>this.selectRowRight(index,uuid) } onClick={ e=>this.selectRow(index,uuid) } onDoubleClick={myClick.bind(this)}>{agent[\"ip_addr\"]}</td>\n          <td onContextMenu={ e=>this.selectRowRight(index,uuid) } onClick={ e=>this.selectRow(index,uuid) } onDoubleClick={myClick.bind(this)}>{agent[\"username\"]}</td>\n          <td onContextMenu={ e=>this.selectRowRight(index,uuid) } onClick={ e=>this.selectRow(index,uuid) } onDoubleClick={myClick.bind(this)}>{agent[\"machine\"]}</td>\n          <td onContextMenu={ e=>this.selectRowRight(index,uuid) } onClick={ e=>this.selectRow(index,uuid) } onDoubleClick={myClick.bind(this)}>{agent[\"arch\"]}</td>\n          <td onContextMenu={ e=>this.selectRowRight(index,uuid) } onClick={ e=>this.selectRow(index,uuid) } onDoubleClick={myClick.bind(this)}>{agent[\"os\"]}</td>\n          <td onContextMenu={ e=>this.selectRowRight(index,uuid) } onClick={ e=>this.selectRow(index,uuid) } onDoubleClick={myClick.bind(this)}>{agent[\"domain\"]}</td>\n          <td onContextMenu={ e=>this.selectRowRight(index,uuid) } onClick={ e=>this.selectRow(index,uuid) } onDoubleClick={myClick.bind(this)}>{agent[\"secure\"] === true ? \"True\":\"False\"}</td>\n          <td onContextMenu={ e=>this.selectRowRight(index,uuid) } onClick={ e=>this.selectRow(index,uuid) } onDoubleClick={myClick.bind(this)}>{agent[\"last_checkin_raw\"]}</td>\n          {/*<td onClick={() => this.clear(uuid)}>X</td>*/}\n        {/*</tr>*/}\n        </ContextMenuTrigger>\n    }.bind(this));\n\n    let deviceIsMobile = false; //At the beginning we set this flag as false. If we can detect the device is a mobile device in the next line, then we set it as true.\n\n    if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) //eslint-disable-line\n        || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(navigator.userAgent.substr(0,4))) { //eslint-disable-line\n      deviceIsMobile = true;\n    }\n\n    if(!deviceIsMobile){\n      const {agents} = this.state;\n      $('.pointer').each(function() {\n        const $tds = $(this).find('td'),\n                    agentUUID = $tds.eq(0).text();\n        const newItemConfig = {\n          title: (!agents[agentUUID]) ? \"undefined\" : agents[agentUUID][\"ip\"]+\"@\"+agents[agentUUID][\"pid\"]+\":\"+agents[agentUUID][\"procname\"],\n          type: \"react-component\",\n          component: \"agents-menu-component\",\n          props: { agentuuid: agentUUID },\n        };\n        if (!(dragSources.includes(agentUUID))) {\n          global.myMainLayout.createDragSource( $(this), newItemConfig );\n          dragSources.push(agentUUID);\n        }\n      });\n  \n      dragSources.forEach(function(item) {\n        if ($(\"#\" + item + \"shad0w\").length === 0) {\n          const index = dragSources.indexOf(item);\n          if (index !== -1) dragSources.splice(index, 1);\n        }\n      });\n    }\n\n    const agentsMenus = Object.keys(agents).map((key) => {\n      const active = this.state.activeIndex;\n      function myClick() {\n        for (const agent in active) {\n          const newItemConfig = {\n            title: (!agents[active[agent]]) ? \"undefined\" : agents[active[agent]][\"ip_addr\"]+\"@\"+agent,\n            type: \"react-component\",\n            component: \"agents-menu-component\",\n            props: { agentuuid: active[agent] },\n          };\n          if( global.myMainLayout.selectedItem === null ) {\n            //alert( 'No item selected. Please click the black header bar to select which item you want to add new items to.' );\n            global.myMainLayout.root.contentItems[ 0 ].addChild( newItemConfig );\n          } else {\n            global.myMainLayout.selectedItem.addChild( newItemConfig );\n          }\n        }\n      }\n      return (\n      <ContextMenu key={key+\"shad0wMENU\"} id={key+\"shad0wMENU\"}>\n        <MenuItem>\n          <strong>{(Object.keys(this.state.activeIndex).length > 1) ? \"MULTIPLE\" : key+\":\"+this.state.agents[key][\"username\"]}</strong>\n        </MenuItem>\n        <MenuItem onClick={myClick}>\n          Interact\n        </MenuItem>\n      </ContextMenu>\n      )\n    });\n\n    return (\n      <div tabIndex=\"1\" onKeyDown={e=>this.selectMany(e)} className=\"scrollable-noflex-nopadding table-responsive\" id=\"Agents_main\"  ref={node => this.node = node}>\n        { agentsMenus }\n        <table className=\"table\"> \n          <thead>\n            <tr className=\"noHover\">\n              <th>Agent</th>\n              <th>IP</th>\n              <th>User</th>\n              <th>Hostname</th>\n              <th>Architecture</th>\n              <th>OS</th>\n              <th>Domain</th>\n              <th>Secure</th>\n              <th>Last Checkin</th>\n              {/*<th>Remove</th>*/}\n            </tr>\n          </thead>\n          <tbody>\n          { agentInfo }\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n\n  selectRow(index, agentuuid) {\n    document.getElementById('Agents_main').focus();\n    const { activeIndex } = this.state;\n    if (!(index in this.state.activeIndex)) {\n      activeIndex[index] = agentuuid;\n    }\n    else {\n      delete activeIndex[index];\n    }\n    this.setState( { activeIndex } )\n  }\n\n  selectRowRight(index, agentuuid) {\n    document.getElementById('Agents_main').focus();\n    const { activeIndex } = this.state;\n    activeIndex[index] = agentuuid;\n    this.setState( { activeIndex } )\n  }\n\n  selectMany(e) {\n    let { activeIndex, allIndexes } = this.state;\n    allIndexes = {};\n    if (e.keyCode === 27) {\n      activeIndex = {};\n      this.setState({activeIndex});\n      return;\n    }\n    if (e.keyCode === 16) {\n      for (const key in this.state.allIndexes) {\n        let vals = [];\n        for (const key in activeIndex) {\n          vals.push(key);\n        }\n        const highest = Math.max.apply( Math, vals );\n        const lowest = Math.min.apply( Math, vals )\n        if (parseInt(key) < highest &&  parseInt(key) >= lowest && highest !== lowest) {\n          activeIndex[key] = this.state.allIndexes[key];\n        }\n      }\n    }\n    this.setState({ activeIndex, allIndexes });\n  }\n\n  handleClick(e) { /*On clicking anywhere outside of our table deselect all values: https://medium.com/@pitipatdop/little-neat-trick-to-capture-click-outside-react-component-5604830beb7f*/\n    if (e.target.id === \"Agents_main\") {\n      this.setState({activeIndex: {}});\n    }\n    else if (this.node.contains(e.target)) {\n      return;\n    }\n    this.setState({activeIndex: {}});\n  }\n\n  getBeacons() {\n    const data = fetch(getCookie(\"Host\")+\"/beacons\", {\n      method: 'GET',\n      credentials: 'include',\n      headers: {\n        'Cookie': getCookie(\"tokenName\")+'='+getCookie(\"tokenValue\")\n      }\n    }).json();\n    return data;\n  }\n\n  componentDidMount() {\n    let { agents } = this.state;\n    const data = this.getBeacons();\n\n    agents = data;\n\n    document.addEventListener('mousedown', (e)=>this.handleClick(e), false)\n    this.setState({ agents, isLoaded: true });\n    setInterval(x => {\n      let { agents } = this.state;\n      agents = this.getBeacons(); \n      this.setState({ agents });\n    }, 1000);\n  }\n  \n  componentWillUnmount() {\n    document.removeEventListener('mousedown', (e)=>this.handleClick(e), false)\n  }\n\n  componentDidUpdate() {\n    /* */\n  }\n}\n","import React from \"react\";\nimport FileDrop from \"react-file-drop\";\nimport { getCookie } from \"../App\";\n\nexport class AgentsMenuPanel extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {results: '', agentuuid: this.props.agentuuid, value: '', history: [], historyval: 0, historylatest: '', latest_result: '', scroll: true, displayDrop: false };\n    this.messagesEnd = React.createRef();\n    this.messageInput = React.createRef();\n    this.bg = React.createRef();\n  }\n\n  render() {\n    const { agentuuid, results } = this.state;\n    const { getCommState } = this.props;\n    const commState = getCommState();\n    const activeAgent = commState.active_agents[agentuuid];\n\n    return (\n      <div className=\"wrap agent-terminal\"\n          ref={ this.bg }\n          onClick={ e=>this.onBgClick(e) }\n          onDoubleClick={ e=>this.onBgClickDouble(e)}\n          onContextMenu={ e=>this.handleClick(e) }>\n        <FileDrop onDrop={this.handleDrop} className={(this.state.displayDrop) ? \"file-drop\":\"none\"}>\n          <div style={{position:\"fixed\",width:\"100%\",height:\"100%\"}} onClick={()=>this.setState({displayDrop: false})} tabIndex=\"0\" id=\"dropBox\"> </div>\n          <div>Drop a DLL here or select one below.  Click anywhere to cancel.</div>\n          <input style={{zIndex:50000}} type=\"file\" onChange={(e) => this.handleSelect(e)}></input>\n        </FileDrop>\n        <div className=\"output\">\n          <div>[+] Agent {activeAgent && activeAgent[\"uuid\"]} {(activeAgent) ? \"Connected.\" : \"Disconnected.\"}</div>\n          <div>I am Bender; Please insert girder.</div><br />\n          <div>Type 'help' for a list of commands.  Type help [command] to see more details about a command.</div>\n          <div>Click the window to scroll to the bottom.  To select text, right click to disable this feature and right click again to re-enable.</div><br />\n          <div className=\"pre\">{ results }</div>\n          <div style={{ display:\"flex\" }}>\n          <div style={{ whiteSpace:\"nowrap\" }}>{(this.state.scroll) && \"*\"}{this.getStub()}&nbsp;</div>\n            <input ref={this.messageInput} maxLength=\"512\" onChange={function(e){this.handleChange(e)}.bind(this)} value={this.state.value} className=\"input clear\" onKeyDown={function(e){this.keyPress(e)}.bind(this)}/>\n          </div>\n          <div style={{height:\"0\"}} ref={this.messagesEnd} />\n         </div>\n      </div>\n    );\n  }\n  \n  arrayBufferToBase64( buffer ) {\n    var bytes = new Uint8Array( buffer );\n    var len = bytes.byteLength;\n    var array = new Array(len);\n    for (var i = 0; i < len; i++) {\n      array[i] = String.fromCharCode( bytes[ i ] );\n    }\n    return window.btoa( array.join('') );\n}\n\n  handleSelect = (e) => {\n    const that = this;\n    const files = e.target.files;\n    const reader = new FileReader();\n    let bfile;\n    reader.onload= function(e) {\n      bfile = e.target.result;\n      //let base64String = btoa(String.fromCharCode(...new Uint8Array(bfile)));\n      let base64String = new Uint8Array(bfile);\n      base64String = Buffer.from(base64String).toString('base64');\n      that.setState({ displayDrop: false, value: that.state.value.trim()+\" \"+base64String });\n      const lastIndex = that.state.value.lastIndexOf(\" \");\n      const str = that.state.value.substring(0, lastIndex);\n      that.print_result_newline(`${str}\\n[+] Tasking agent to run \"${str}\"`);\n      that.sendAgentData(true);\n    };\n    reader.readAsArrayBuffer(files[0]);\n  }\n\n  handleDrop = (files, event) => {\n    const that = this;\n    const reader = new FileReader();\n    let bfile;\n    reader.onload= function(e) {\n      bfile = e.target.result;\n      let base64String = new Uint8Array(bfile);\n      base64String = Buffer.from(base64String).toString('base64');\n      that.setState({ displayDrop: false, value: that.state.value.trim()+\" \"+base64String });\n      const lastIndex = that.state.value.lastIndexOf(\" \");\n      const str = that.state.value.substring(0, lastIndex);\n      that.print_result_newline(`${str}\\n[+] Tasking agent to run \"${str}\"`);\n      that.sendAgentData(true);\n    };\n    reader.readAsArrayBuffer(files[0]);\n  }\n\n  getStub() {\n    const { agentuuid } = this.state;\n    const { getCommState } = this.props;\n    const commState = getCommState();\n    const activeAgent = commState.active_agents[agentuuid];\n\n    let dt;\n    if (activeAgent) {\n      dt = Math.max(((new Date()).getTime() - activeAgent[\"lastCheckIn\"]) / 1000);\n      if (dt >= 1) {\n        dt = Math.ceil(dt);\n      }\n      let stale = false;\n      let seconds = dt + 's';\n      if (Math.floor(dt) > 6+parseInt(activeAgent[\"sleep\"])+(parseInt(activeAgent[\"sleep\"])*(parseInt(activeAgent[\"jitter\"])/100))+1) {\n        stale = true;\n      }\n      if (dt < 0) {\n        dt = 0;\n      }\n      if (activeAgent[\"sleep\"] === \"0\") {\n        dt = 'interactive';\n      }\n      else {\n        if (dt > 86400) {\n          dt = Math.floor(dt/86400);\n          dt = seconds + '(' + dt + 'd)';\n        }\n        else if (dt > 3600) {\n          dt = Math.floor(dt/3600);\n          dt = seconds + '(' + dt + 'h)';\n        }\n        else if (dt > 60) {\n          dt = Math.floor(dt/60);\n          dt = seconds + '(' + dt + 'm)';\n        }\n        else if (dt >= 1 | dt === 0) {\n          dt = seconds;\n        }\n        else {\n          if (Math.round(dt) === 1) {\n            dt = Math.round(dt) + 's'\n          } else {\n            dt = Math.round(dt*1000) + 'ms'\n          }\n        }\n        if (stale === true) {\n          dt = \"[STALE] \" + dt;\n        }\n      }\n    }\n    let trueSleep = activeAgent && activeAgent[\"trueSleep\"];\n    if (trueSleep === undefined) {\n      trueSleep = \"∞\";\n    } \n    return `Agent (${(activeAgent) ? activeAgent[\"platform\"]:\"N/A\"}) (${dt})[${(activeAgent) ? trueSleep:\"N/A\"}] >`;\n  }\n\n  print_result_newline(result) {\n    const { agentuuid } = this.state;\n    let { results, latest_result } = this.state;\n    if (localStorage.getItem(agentuuid)) {\n      results = localStorage.getItem(agentuuid);\n    }\n    if (localStorage.getItem(agentuuid+\"_latest\")) {\n      latest_result = localStorage.getItem(agentuuid+\"_latest\");\n    }\n    if (latest_result !== result) {\n      results+= this.getStub() + \" \" + result + \"\\n\";\n      const updateState = () => {\n         this.setState({\n           results\n         },() => { this.bottomScroll(); })\n       }\n       updateState();\n       localStorage.setItem(agentuuid, results);\n    }\n  }\n\n  time = null;\n  print_result(result) {\n    const { agentuuid } = this.state;\n    const { getCommState } = this.props;\n    const commState = getCommState();\n    const activeAgent = commState.active_agents[agentuuid];\n    let dt;\n    let stale = false;\n    if (activeAgent) {\n      dt = Math.max(((new Date()).getTime() - activeAgent[\"lastCheckIn\"]) / 1000);\n      if (dt >= 1) {\n        dt = Math.ceil(dt);\n      }\n      if (Math.floor(dt) > parseInt(activeAgent[\"sleep\"])+(parseInt(activeAgent[\"sleep\"])*(parseInt(activeAgent[\"jitter\"])/100))) {\n        stale = true;\n      }\n    }\n\n    let bytes;\n    if (result.includes(\"[X]\")) {\n      bytes = 'N/A';\n    }\n    else {\n      bytes = result.length;\n    }\n\n    let { results, latest_result } = this.state;\n    if (localStorage.getItem(agentuuid)) {\n      results = localStorage.getItem(agentuuid);\n    }\n    let checkLatest = results.split(\"Results >>\")[results.split(\"Results >>\").length-1];\n    if (checkLatest === undefined) {\n      checkLatest = \"\";\n    }\n    const results_latest = localStorage.getItem(agentuuid+\"_latest\");\n    //The below continues to print the last thing in the agent queue when the agent exits, only show if not stale.\n    if (this.time === null | (Math.ceil(((new Date()).getTime()-this.time)/1000) > (this.props.getCommState().active_agents[this.props.agentuuid][\"trueSleep\"]) && stale === false) | result === \"LOAD\" | \n     (activeAgent[\"sleep\"] === undefined && results_latest !== result && result !== latest_result) | (checkLatest.includes(result) && checkLatest.includes(\"Tasking agent to\") && activeAgent[\"type\"] === \"smb\")) {\n      //alert(checkLatest);\n      if (this.props.getCommState().active_agents[this.props.agentuuid][\"trueSleep\"] < 1 && Math.ceil(((new Date()).getTime()-this.time)/1000) < 2) {\n        return false;\n      }\n      this.time = (new Date()).getTime();\n      if (result === \"LOAD\") {\n        results+= \"\";\n      } else {\n        results+= \"Results >>\\n\" + result + \"\\n[+] Host responded with [\" + bytes + \"] bytes.\\n\";\n      }\n      const updateState = () => {\n        this.setState({\n          results,\n          latest_result : result,\n          dedup : true\n        },() => { \n          localStorage.setItem(agentuuid, results);\n          localStorage.setItem(agentuuid+\"_latest\", result);\n          this.bottomScroll(); })\n      }\n      updateState();\n    }\n  }\n\n  onBgClick(e) {\n    if (!this.state.scroll) {\n      return;\n    }\n    if (this.isInViewport() === false) {\n      this.bottomScroll();\n    } else {\n      this.messageInput.current.focus();\n    }\n  }\n\n  onBgClickDouble(e) {\n    if (!this.state.scroll) {\n      return;\n    }\n    if (this.isInViewport() === false) {\n      this.bottomScroll();\n    } else {\n      this.messageInput.current.focus();\n    }\n  }\n\n  handleClick(e) {\n    e.preventDefault();\n    let {scroll} = this.state;\n    if (e.button === 2) {\n      scroll = !scroll;\n      this.setState({ scroll });\n    }\n  }\n\n  handleChange(e) {\n    this.setState({ value: e.target.value });\n  }\n\n  keyPress(e) {\n    if(e.keyCode === 38) {\n      let { value, history, historyval, historylatest } = this.state;\n\n      if(historyval === history.length)\n        historylatest = value;\n\n      if(historyval > 0)\n        historyval--;\n\n      value = history[historyval];\n\n      e.preventDefault();\n      this.HAXLOL = true;\n      this.setState({ value, historyval, historylatest });\n\n      return false;\n    }\n    else if(e.keyCode === 40) {\n      let { value, history, historyval, historylatest } = this.state;\n      \n      if(historyval !== history.length)\n        historyval++;\n      \n      if(historyval === history.length+1)\n        value = history[historyval-1];\n      else if(historyval === history.length)\n        value = historylatest\n      else\n        value = history[historyval];\n\n      e.preventDefault();\n      this.HAXLOL = true;\n      this.setState({ value, historyval });\n\n      return false;\n    }\n    else if(e.keyCode === 13){\n      this.bottomScroll();\n      const { agentuuid } = this.state;\n      const { getCommState } = this.props;\n      const commState = getCommState();\n      let helpMenu = {};\n\n      if (commState.active_agents[agentuuid] !== undefined) {\n        switch (commState.active_agents[agentuuid][\"platform\"]) {\n          case \"win32\":\n            if (commState.active_agents[agentuuid][\"type\"] === \"smb\") {\n              delete commState.win32commands[\"sleep\"];\n            }\n            helpMenu = commState.win32commands;\n            break;\n          case \"win64\":\n            if (commState.active_agents[agentuuid][\"type\"] === \"smb\") {\n              delete commState.win64commands[\"sleep\"];\n            }\n            helpMenu = commState.win64commands;\n            break;\n          case \"linux\":\n            helpMenu = commState.linuxcommands;\n            break;\n          case \"darwin\":\n            helpMenu = commState.darwincommands;\n            break;\n          default:\n            // do nothing\n        }\n      }\n      else {\n        this.print_result_newline(\"Agent no longer exists - please close window.\");\n        this.setState({ value: '' });\n        return;\n      }\n\n      helpMenu[\"clear\"] = [\"Clear the current agent panel.\"];\n      helpMenu[\"help\"] = [\"Show help menu.\", \"help [command]\", \"Display the help menu for a command.\"];\n      if(this.state.value === \"\"){\n        this.print_result_newline(' ');\n        return false;\n      }\n      if(this.state.value === \"help\" || this.state.value.split(\" \")[0] === \"help\") {\n        const helpArr = this.state.value.split(\" \");\n        if (helpArr[1]) {\n          const helpCommand = helpArr[1];\n          if (helpCommand in helpMenu) {\n            if (helpMenu[helpCommand].length === 2) {\n              this.print_result_newline(this.state.value+\"\\nUsage: \"+helpMenu[helpCommand][1]+\"\\nHelp: \"+helpMenu[helpCommand][0]+\"\\n\");\n            }\n            else if (helpMenu[helpCommand].length === 3) {\n              this.print_result_newline(this.state.value+\"\\nUsage: \"+helpMenu[helpCommand][1]+\"\\nHelp: \"+helpMenu[helpCommand][0]+\"\\n\"+helpMenu[helpCommand][2]+\"\\n\");\n            }\n            else {\n              this.print_result_newline(this.state.value+\"\\nUsage: \"+helpCommand+\"\\nHelp: \"+helpMenu[helpCommand][0]+\"\\n\")\n            }\n          }\n          else {\n            this.print_result_newline(this.state.value+\"\\nCommand does not exist!\");\n          }\n          this.setState({ value: '' });\n        }\n        else {\n          let help = '';\n          const ordered = {};\n          Object.keys(helpMenu).sort().forEach(function(key) {\n            ordered[key] = helpMenu[key];\n          });\n          for (const key in ordered) {\n            help += `\\n\"${key}\" : ${ordered[key][0]}`;\n          }\n          this.print_result_newline(this.state.value+\"\\n[+] Listing [\"+Object.keys(helpMenu).length+\"] \"+commState.active_agents[agentuuid][\"platform\"]+\" commands.\"+help);\n          this.setState({ value: '' });\n        }\n      }\n      else if(this.state.value === \"clear\" || this.state.value.split(\" \")[0] === \"clear\") {\n        this.setState({ value: '', results: '', latest_result: ''});\n        localStorage.removeItem(agentuuid);\n        localStorage.removeItem(agentuuid+\"_latest\");\n      }\n      else {\n        if (this.state.value.split(\" \")[0] in helpMenu) {\n          if (this.state.value.split(\" \")[0] === \"inject\") {\n            if (this.state.value.split(\" \").length < 3 || this.state.value.split(\" \").length > 5) {\n              this.print_result_newline(`${this.state.value}\\n[-] Wrong number of arguments.  Use 'help inject' for more info.`);\n              this.setState({ value: '' });\n            }\n            else {\n              if (this.state.value.split(\" \").length === 3 || this.state.value.split(\" \")[3] === \"\" || this.state.value.split(\" \")[3] === \" \") {\n                this.setState({ value: this.state.value.trim() + \" none\"});\n              }\n              const updateState = () => {\n                 this.setState({\n                  displayDrop: true\n                 },() => { document.getElementById(\"dropBox\").focus(); })\n               }\n              updateState();\n            }\n          }\n          else if (this.state.value.split(\" \")[0] === \"shInject\") {\n            if (this.state.value.split(\" \").length < 3 || this.state.value.split(\" \").length > 4) {\n              this.print_result_newline(`${this.state.value}\\n[-] Wrong number of arguments.  Use 'help shInject' for more info.`);\n              this.setState({ value: '' });\n            }\n            else {\n              const updateState = () => {\n                 this.setState({\n                  displayDrop: true\n                 },() => { document.getElementById(\"dropBox\").focus(); })\n               }\n              updateState();\n            }\n          }\n          else{\n            this.print_result_newline(`${this.state.value}\\n[+] Tasking agent to run \"${this.state.value}\"`);\n            this.sendAgentData();\n          }\n        }\n        else {\n          this.print_result_newline(`${this.state.value}\\n[-] Invalid command.  Type 'help' for a list of commands.`);\n          this.setState({ value: '' });\n        }\n      } \n    }\n  }\n\n  sendAgentData(inject) {\n    let { history, historyval, value, historylatest } = this.state;\n    historylatest = \"\";\n    if(history.length > 1024)\n      history = history.slice(history.length-1024)\n    if (inject === true) {\n      history = history.concat(value);\n      const lastIndex = value.lastIndexOf(\" \");\n      const str = value.substring(0, lastIndex);\n      history = history.concat(str);\n    }\n    else {\n      history = history.concat(value);\n    }\n    historyval = history.length;\n    this.setState({ history, historyval, value, historylatest });\n\n    //var data = prepSendData({\"route\":\"agents\", \"data\":{\"agentUUID\":this.state.agentuuid,\"data\":value}});\n    //this.props.connPipe.send(JSON.stringify(data))\n    this.setState({ value: '' });\n  }\n\n\n  bottomScroll() {\n    this.scrollToBottom();\n    const { current } = this.messageInput;\n    if (current && this.HAXLOL) {\n      this.HAXLOL = false;\n      const { value } = this.state;\n      if (value != null) {\n        current.setSelectionRange(value.length, value.length);\n      }\n    }\n  }\n\n  scrollToBottom = () => {\n    this.messagesEnd.current.scrollIntoView({ behavior: 'smooth' });\n  }\n\n  isInViewport(offset = 0) {\n    if (!this.messageInput.current) return false;\n    const top = this.messageInput.current.getBoundingClientRect().top;\n    return (top + offset) >= 0 && (top - offset) <= window.innerHeight;\n  }\n\n  componentDidMount() {\n    this.scrollToBottom();\n\n    const { agentuuid } = this.state;\n    const { getCommState } = this.props;\n\n    const commState = getCommState();\n    \n    if (agentuuid in commState.active_agents) {\n      this.print_result(\"LOAD\");\n    }\n\n    setInterval(x => this.forceUpdate(), 1000);\n  }\n\n  componentDidUpdate() {\n    const { agentuuid } = this.state;\n    const { getCommState } = this.props;\n\n    const commState = getCommState();\n\n\n    if (agentuuid in commState.active_agents) {\n      if ('results' in commState.active_agents[agentuuid]) {\n          const agentResults = commState.active_agents[agentuuid].results;\n          this.print_result(agentResults.join(\"\\n\"));\n      } \n    }\n  }\n}","module.exports = __webpack_public_path__ + \"static/media/background.977e3fd0.jpg\";","import $ from \"jquery\";\n//import React from \"react\";\n//import ReactDOM from \"react-dom\";\nwindow.$ = $;\nwindow.jQuery = $;\nwindow.jquery = $;\n\n//window.ReactDOM = ReactDOM;\n//window.React = React;\n","global.myMainLayout = undefined;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport './globals.js'\n\nwindow.React = React;\nwindow.ReactDOM = ReactDOM;\n\nReactDOM.render(\n<App />, \ndocument.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}